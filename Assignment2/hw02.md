Assignment 2
================
Kevin Hu
19/09/2019

## Exercise 1: Basic dplyr

### 1.1 Use filter() to subset the gapminder data to three countries of your choice in the 1970’s.

``` r
gapminder %>% 
  filter(country == "Argentina" | country == "China" | country == "France",
        year > 1969 & year < 1980) %>% 
  arrange(year) %>% 
  knitr::kable()
```

| country   | continent | year |  lifeExp |       pop |  gdpPercap |
| :-------- | :-------- | ---: | -------: | --------: | ---------: |
| Argentina | Americas  | 1972 | 67.06500 |  24779799 |  9443.0385 |
| China     | Asia      | 1972 | 63.11888 | 862030000 |   676.9001 |
| France    | Europe    | 1972 | 72.38000 |  51732000 | 16107.1917 |
| Argentina | Americas  | 1977 | 68.48100 |  26983828 | 10079.0267 |
| China     | Asia      | 1977 | 63.96736 | 943455000 |   741.2375 |
| France    | Europe    | 1977 | 73.83000 |  53165019 | 18292.6351 |

### 1.2 Use the pipe operator %\>% to select “country” and “gdpPercap” from your filtered dataset in 1.1.

``` r
gapminder %>% 
  filter(country == "Argentina" | country == "China" | country == "France",
        year > 1969 & year < 1980) %>% 
  arrange(year) %>% 
  select(country, gdpPercap) %>% 
  knitr::kable()
```

| country   |  gdpPercap |
| :-------- | ---------: |
| Argentina |  9443.0385 |
| China     |   676.9001 |
| France    | 16107.1917 |
| Argentina | 10079.0267 |
| China     |   741.2375 |
| France    | 18292.6351 |

### 1.3 Filter gapminder to all entries that have experienced a drop in life expectancy. Be sure to include a new variable that’s the increase in life expectancy in your tibble. Hint: you might find the lag() or diff() functions useful.

``` r
gapminder %>% 
  group_by(country) %>% 
  mutate(diff_lifeExp = round((lifeExp - lag(lifeExp)),digits = 3)) %>% 
  ungroup() %>%
  filter(diff_lifeExp < 0) %>% 
  select(country, year, lifeExp, diff_lifeExp) %>% 
  knitr::kable(format = "rst") 
```

\======================== ==== ======== ============ country year
lifeExp diff\_lifeExp ======================== ==== ========
============ Albania 1992 71.58100 -0.419 Angola 1987 39.90600 -0.036
Benin 2002 54.40600 -0.371 Botswana 1992 62.74500 -0.877 Botswana 1997
52.55600 -10.189 Botswana 2002 46.63400 -5.922 Bulgaria 1977 70.81000
-0.090 Bulgaria 1992 71.19000 -0.150 Bulgaria 1997 70.32000 -0.870
Burundi 1992 44.73600 -3.475 Cambodia 1972 40.31700 -5.098 Cambodia 1977
31.22000 -9.097 Cameroon 1992 54.31400 -0.671 Cameroon 1997 52.19900
-2.115 Cameroon 2002 49.85600 -2.343 Central African Republic 1992
49.39600 -1.089 Central African Republic 1997 46.06600 -3.330 Central
African Republic 2002 43.30800 -2.758 Chad 1997 51.57300 -0.151 Chad
2002 50.52500 -1.048 China 1962 44.50136 -6.048 Congo, Dem. Rep. 1982
47.78400 -0.020 Congo, Dem. Rep. 1987 47.41200 -0.372 Congo, Dem.
Rep. 1992 45.54800 -1.864 Congo, Dem. Rep. 1997 42.58700 -2.961 Congo,
Rep. 1992 56.43300 -1.037 Congo, Rep. 1997 52.96200 -3.471 Cote d’Ivoire
1992 52.04400 -2.611 Cote d’Ivoire 1997 47.99100 -4.053 Cote d’Ivoire
2002 46.83200 -1.159 Croatia 1982 70.46000 -0.180 Czech Republic 1972
70.29000 -0.090 Denmark 1982 74.63000 -0.060 El Salvador 1977 56.69600
-1.511 El Salvador 1982 56.60400 -0.092 Eritrea 1982 43.89000 -0.645
Gabon 1997 60.46100 -0.905 Gabon 2002 56.76100 -3.700 Gabon 2007
56.73500 -0.026 Ghana 2002 58.45300 -0.103 Hungary 1982 69.39000 -0.560
Hungary 1992 69.17000 -0.410 Iraq 1992 59.46100 -5.583 Iraq 1997
58.81100 -0.650 Iraq 2002 57.04600 -1.765 Jamaica 1992 71.76600 -0.004
Jamaica 2002 72.04700 -0.215 Kenya 1992 59.28500 -0.054 Kenya 1997
54.40700 -4.878 Kenya 2002 50.99200 -3.415 Korea, Dem. Rep. 1992
69.97800 -0.669 Korea, Dem. Rep. 1997 67.72700 -2.251 Korea, Dem.
Rep. 2002 66.66200 -1.065 Lesotho 1997 55.55800 -4.127 Lesotho 2002
44.59300 -10.965 Lesotho 2007 42.59200 -2.001 Liberia 1992 40.80200
-5.225 Malawi 1997 47.49500 -1.925 Malawi 2002 45.00900 -2.486
Montenegro 2002 73.98100 -1.464 Mozambique 2002 44.02600 -2.318
Mozambique 2007 42.08200 -1.944 Myanmar 2002 59.90800 -0.420 Namibia
1997 58.90900 -3.090 Namibia 2002 51.47900 -7.430 Netherlands 1972
73.75000 -0.070 Nigeria 1997 47.46400 -0.008 Nigeria 2002 46.60800
-0.856 Norway 1987 75.89000 -0.080 Poland 1977 70.67000 -0.180 Poland
1987 70.98000 -0.340 Puerto Rico 1992 73.91100 -0.719 Romania 1987
69.53000 -0.130 Romania 1992 69.36000 -0.170 Rwanda 1987 44.02000 -2.198
Rwanda 1992 23.59900 -20.421 Serbia 1982 70.16200 -0.138 Sierra Leone
1992 38.33300 -1.673 Slovak Republic 1972 70.35000 -0.630 Somalia 1992
39.65800 -4.843 South Africa 1997 60.23600 -1.652 South Africa 2002
53.36500 -6.871 South Africa 2007 49.33900 -4.026 Swaziland 1997
54.28900 -4.185 Swaziland 2002 43.86900 -10.420 Swaziland 2007 39.61300
-4.256 Tanzania 1992 50.44000 -1.095 Tanzania 1997 48.46600 -1.974 Togo
2002 57.56100 -0.829 Trinidad and Tobago 1997 69.46500 -0.397 Trinidad
and Tobago 2002 68.97600 -0.489 Uganda 1977 50.35000 -0.666 Uganda 1982
49.84900 -0.501 Uganda 1992 48.82500 -2.684 Uganda 1997 44.57800 -4.247
Zambia 1987 50.82100 -1.000 Zambia 1992 46.10000 -4.721 Zambia 1997
40.23800 -5.862 Zambia 2002 39.19300 -1.045 Zimbabwe 1992 60.37700
-1.974 Zimbabwe 1997 46.80900 -13.568 Zimbabwe 2002 39.98900 -6.820
======================== ==== ========
============

### 1.4 Filter gapminder so that it shows the max GDP per capita experienced by each country.

``` r
gapminder %>% 
  group_by(country) %>% 
  arrange(desc(gdpPercap)) %>% 
  filter(gdpPercap == first(gdpPercap)) %>% 
  arrange(country) %>% 
  knitr::kable(format = "rst")
```

\======================== ========= ==== ======= ========== ===========
country continent year lifeExp pop gdpPercap ========================
========= ==== ======= ========== =========== Afghanistan Asia 1982
39.854 12881816 978.0114 Albania Europe 2007 76.423 3600523 5937.0295
Algeria Africa 2007 72.301 33333216 6223.3675 Angola Africa 1967 35.985
5247469 5522.7764 Argentina Americas 2007 75.320 40301927 12779.3796
Australia Oceania 2007 81.235 20434176 34435.3674 Austria Europe 2007
79.829 8199783 36126.4927 Bahrain Asia 2007 75.635 708573 29796.0483
Bangladesh Asia 2007 64.062 150448339 1391.2538 Belgium Europe 2007
79.441 10392226 33692.6051 Benin Africa 2007 56.728 8078314 1441.2849
Bolivia Americas 2007 65.554 9119152 3822.1371 Bosnia and Herzegovina
Europe 2007 74.852 4552198 7446.2988 Botswana Africa 2007 50.728 1639131
12569.8518 Brazil Americas 2007 72.390 190010647 9065.8008 Bulgaria
Europe 2007 73.005 7322858 10680.7928 Burkina Faso Africa 2007 52.295
14326203 1217.0330 Burundi Africa 1992 44.736 5809236 631.6999 Cambodia
Asia 2007 59.723 14131858 1713.7787 Cameroon Africa 1987 54.985 10780667
2602.6642 Canada Americas 2007 80.653 33390141 36319.2350 Central
African Republic Africa 1962 39.475 1523478 1193.0688 Chad Africa 2007
50.651 10238807 1704.0637 Chile Americas 2007 78.553 16284741 13171.6388
China Asia 2007 72.961 1318683096 4959.1149 Colombia Americas 2007
72.889 44227550 7006.5804 Comoros Africa 1972 48.944 250027 1937.5777
Congo, Dem. Rep. Africa 1957 40.652 15577932 905.8602 Congo, Rep. Africa
1982 56.695 1774735 4879.5075 Costa Rica Americas 2007 78.782 4133884
9645.0614 Cote d’Ivoire Africa 1982 53.983 9025951 2602.7102 Croatia
Europe 2007 75.748 4493312 14619.2227 Cuba Americas 2007 78.273 11416987
8948.1029 Czech Republic Europe 2007 76.486 10228744 22833.3085 Denmark
Europe 2007 78.332 5468120 35278.4187 Djibouti Africa 1972 44.366 178848
3694.2124 Dominican Republic Americas 2007 72.235 9319622 6025.3748
Ecuador Americas 1997 72.312 11911819 7429.4559 Egypt Africa 2007 71.338
80264543 5581.1810 El Salvador Americas 2007 71.878 6939688 5728.3535
Equatorial Guinea Africa 2007 51.579 551201 12154.0897 Eritrea Africa
1997 53.378 4058319 913.4708 Ethiopia Africa 2007 52.947 76511887
690.8056 Finland Europe 2007 79.313 5238460 33207.0844 France Europe
2007 80.657 61083916 30470.0167 Gabon Africa 1977 52.790 706367
21745.5733 Gambia Africa 1977 41.842 608274 884.7553 Germany Europe 2007
79.406 82400996 32170.3744 Ghana Africa 2007 60.022 22873338 1327.6089
Greece Europe 2007 79.483 10706290 27538.4119 Guatemala Americas 2007
70.259 12572928 5186.0500 Guinea Africa 2002 53.676 8807818 945.5836
Guinea-Bissau Africa 1982 39.327 825987 838.1240 Haiti Americas 1982
51.461 5198399 2011.1595 Honduras Americas 2007 70.198 7483763 3548.3308
Hong Kong, China Asia 2007 82.208 6980412 39724.9787 Hungary Europe 2007
73.338 9956108 18008.9444 Iceland Europe 2007 81.757 301931 36180.7892
India Asia 2007 64.698 1110396331 2452.2104 Indonesia Asia 2007 70.650
223547000 3540.6516 Iran Asia 1977 57.702 35480679 11888.5951 Iraq Asia
1977 60.413 11882916 14688.2351 Ireland Europe 2007 78.885 4109086
40675.9964 Israel Asia 2007 80.745 6426679 25523.2771 Italy Europe 2007
80.546 58147733 28569.7197 Jamaica Americas 1972 69.000 1997616
7433.8893 Japan Asia 2007 82.603 127467972 31656.0681 Jordan Asia 2007
72.535 6053193 4519.4612 Kenya Africa 2007 54.110 35610177 1463.2493
Korea, Dem. Rep. Asia 1982 69.100 17647518 4106.5253 Korea, Rep. Asia
2007 78.623 49044790 23348.1397 Kuwait Asia 1957 58.033 212846
113523.1329 Lebanon Asia 2007 71.993 3921278 10461.0587 Lesotho Africa
2007 42.592 2012649 1569.3314 Liberia Africa 1972 42.614 1482628
803.0055 Libya Africa 1977 57.442 2721783 21951.2118 Madagascar Africa
1972 44.851 7082430 1748.5630 Malawi Africa 2007 48.303 13327079
759.3499 Malaysia Asia 2007 74.241 24821286 12451.6558 Mali Africa 2007
54.467 12031795 1042.5816 Mauritania Africa 2007 64.164 3270065
1803.1515 Mauritius Africa 2007 72.801 1250882 10956.9911 Mexico
Americas 2007 76.195 108700891 11977.5750 Mongolia Asia 2007 66.803
2874127 3095.7723 Montenegro Europe 1987 74.865 569473 11732.5102
Morocco Africa 2007 71.164 33757175 3820.1752 Mozambique Africa 2007
42.082 19951656 823.6856 Myanmar Asia 2007 62.069 47761980 944.0000
Namibia Africa 2007 52.906 2055080 4811.0604 Nepal Asia 2007 63.785
28901790 1091.3598 Netherlands Europe 2007 79.762 16570613 36797.9333
New Zealand Oceania 2007 80.204 4115771 25185.0091 Nicaragua Americas
1977 57.470 2554598 5486.3711 Niger Africa 1967 40.118 4534062 1054.3849
Nigeria Africa 2007 46.859 135031164 2013.9773 Norway Europe 2007 80.196
4627926 49357.1902 Oman Asia 2007 75.640 3204897 22316.1929 Pakistan
Asia 2007 65.483 169270617 2605.9476 Panama Americas 2007 75.537 3242173
9809.1856 Paraguay Americas 1982 66.874 3366439 4258.5036 Peru Americas
2007 71.421 28674757 7408.9056 Philippines Asia 2007 71.688 91077287
3190.4810 Poland Europe 2007 75.563 38518241 15389.9247 Portugal Europe
2007 78.098 10642836 20509.6478 Puerto Rico Americas 2007 78.746 3942491
19328.7090 Reunion Africa 2007 76.442 798094 7670.1226 Romania Europe
2007 72.476 22276056 10808.4756 Rwanda Africa 1982 46.218 5507565
881.5706 Sao Tome and Principe Africa 1982 60.351 98593 1890.2181 Saudi
Arabia Asia 1977 58.690 8128505 34167.7626 Senegal Africa 2007 63.062
12267493 1712.4721 Serbia Europe 1987 71.218 9230783 15870.8785 Sierra
Leone Africa 1982 38.445 3464522 1465.0108 Singapore Asia 2007 79.972
4553009 47143.1796 Slovak Republic Europe 2007 74.663 5447502 18678.3144
Slovenia Europe 2007 77.926 2009245 25768.2576 Somalia Africa 1977
41.974 4353666 1450.9925 South Africa Africa 2007 49.339 43997828
9269.6578 Spain Europe 2007 80.941 40448191 28821.0637 Sri Lanka Asia
2007 72.396 20378239 3970.0954 Sudan Africa 2007 58.556 42292929
2602.3950 Swaziland Africa 2007 39.613 1133066 4513.4806 Sweden Europe
2007 80.884 9031088 33859.7484 Switzerland Europe 2007 81.701 7554661
37506.4191 Syria Asia 2007 74.143 19314747 4184.5481 Taiwan Asia 2007
78.400 23174294 28718.2768 Tanzania Africa 2007 52.517 38139640
1107.4822 Thailand Asia 2007 70.616 65068149 7458.3963 Togo Africa 1972
49.759 2056351 1649.6602 Trinidad and Tobago Americas 2007 69.819
1056608 18008.5092 Tunisia Africa 2007 73.923 10276158 7092.9230 Turkey
Europe 2007 71.777 71158647 8458.2764 Uganda Africa 2007 51.542 29170398
1056.3801 United Kingdom Europe 2007 79.425 60776238 33203.2613 United
States Americas 2007 78.242 301139947 42951.6531 Uruguay Americas 2007
76.384 3447496 10611.4630 Venezuela Americas 1977 67.456 13503563
13143.9510 Vietnam Asia 2007 74.249 85262356 2441.5764 West Bank and
Gaza Asia 1997 71.096 2826046 7110.6676 Yemen, Rep. Asia 2007 62.698
22211743 2280.7699 Zambia Africa 1967 47.768 3900000 1777.0773 Zimbabwe
Africa 1972 55.635 5861135 799.3622 ======================== =========
==== ======= ==========
===========

### 1.5 Produce a scatterplot of Canada’s life expectancy vs. GDP per capita using ggplot2, without defining a new variable. That is, after filtering the gapminder data set, pipe it directly into the ggplot() function. Ensure GDP per capita is on a log scale.

``` r
gapminder %>% 
  filter(country == "Canada") %>% 
  ggplot(aes(gdpPercap, lifeExp))+
  labs(x = "GDP per capita", y = "Life expectancy")+
  scale_x_log10()+
  geom_point()+
  geom_line()+
  theme_classic()
```

![](hw02_files/figure-gfm/unnamed-chunk-6-1.png)<!-- -->

## Exercise 2: Explore individual variables with dplyr

### 2.1 What are possible values (or range, whichever is appropriate) of each variable?

For the “continent” variable, the possible values are:

``` r
levels(gapminder$continent)
```

    ## [1] "Africa"   "Americas" "Asia"     "Europe"   "Oceania"

For the “lifeExp” variable in 2007, the range is:

``` r
summary(gapminder$lifeExp[gapminder$year == 2007])[c(1,6)]
```

    ##   Min.   Max. 
    ## 39.613 82.603

### 2.2 What values are typical? What’s the spread? What’s the distribution? Etc., tailored to the variable at hand.

The distribution of the life expectancy world wide in 2007:

``` r
gapminder %>% 
  filter(year == 2007) %>% 
  ggplot(aes(lifeExp))+
  geom_density()+
  theme_classic()
```

![](hw02_files/figure-gfm/unnamed-chunk-9-1.png)<!-- -->

This distribution is skewed to the right. Thus, the mode could be
considered as a typical value.

``` r
life2007 <- gapminder %>% 
  filter(year == 2007) %>% 
  select(lifeExp)  
den <- density(life2007$lifeExp)
print(paste("The mode of this distribution is", round(den$x[which.max(den$y)],digits = 2), sep = " "))
```

    ## [1] "The mode of this distribution is 75.24"

Standard deviation is one of the measures of
spread.

``` r
print(paste("The mode of this distribution is", round(sd(life2007$lifeExp), digits = 2), sep = " "))
```

    ## [1] "The mode of this distribution is 12.07"

## Exercise 3: Explore various plot types

### 3.1 A scatterplot of two quantitative variables

``` r
gapminder %>%
  filter(year == 2007) %>% 
  ggplot(aes(pop, gdpPercap, colour = continent))+
  scale_x_log10()+
  geom_point()+
  stat_smooth(method = "lm")+
  theme_classic()
```

![](hw02_files/figure-gfm/unnamed-chunk-12-1.png)<!-- -->

### 3.2 One other plot besides a scatterplot

``` r
gapminder %>% 
  filter(year == 1952) %>% 
  ggplot(aes(continent, lifeExp))+
  geom_boxplot()+
  theme_classic()
```

![](hw02_files/figure-gfm/unnamed-chunk-13-1.png)<!-- -->
